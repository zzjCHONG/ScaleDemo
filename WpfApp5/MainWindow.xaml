<Window
    x:Class="WpfApp5.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WpfApp5"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="1500"
    Height="1800"
    WindowState="Maximized"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="25*" />
            <RowDefinition Height="16*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  左侧控制面板  -->
        <StackPanel
            Grid.Column="0"
            Margin="10,10,10,0"
            VerticalAlignment="Top"
            Orientation="Vertical">

            <Button Click="LoadImage_Click" Content="导入图像" />

            <TextBlock Text="字体大小:" />
            <TextBox
                x:Name="FontSizeBox"
                Text="16"
                TextChanged="ScaleParamsChanged" />

            <TextBlock Text="线条宽度:" />
            <TextBox
                x:Name="ThicknessBox"
                Text="1"
                TextChanged="ScaleParamsChanged" />

            <TextBlock Text="字体颜色:" />
            <ComboBox
                x:Name="ColorBox"
                SelectedIndex="2"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="黑色" />
                <ComboBoxItem Content="白色" />
                <ComboBoxItem Content="红色" />
                <ComboBoxItem Content="绿色" />
                <ComboBoxItem Content="蓝色" />
                <ComboBoxItem Content="黄色" />
            </ComboBox>

            <TextBlock Text="字体样式:" />
            <ComboBox
                x:Name="FontWeightBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="正常" />
                <ComboBoxItem Content="加粗" />
            </ComboBox>

            <TextBlock Text="字体显示:" />
            <ComboBox
                x:Name="FontVisibilityBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="显示" />
                <ComboBoxItem Content="隐藏" />
            </ComboBox>

            <TextBlock Text="字体类型:" />
            <ComboBox
                x:Name="FontFamilyBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="Arial" />
                <ComboBoxItem Content="Times New Roman" />
            </ComboBox>

            <TextBlock Text="背景颜色:" />
            <ComboBox
                x:Name="BackgroundBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="灰色" />
                <ComboBoxItem Content="白色" />
                <ComboBoxItem Content="黑色" />
                <ComboBoxItem Content="透明" />
            </ComboBox>

            <TextBlock Text="位置:" />
            <ComboBox
                x:Name="PositionBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="左上" />
                <ComboBoxItem Content="右上" />
                <ComboBoxItem Content="左下" />
                <ComboBoxItem Content="右下" />
            </ComboBox>

            <TextBlock
                Margin="0,0,5,0"
                VerticalAlignment="Center"
                Text="标尺方向：" />
            <ComboBox
                x:Name="DrawModeBox"
                SelectedIndex="0"
                SelectionChanged="ScaleParamsChanged">
                <ComboBoxItem Content="水平" IsSelected="True" />
                <ComboBoxItem Content="竖直" />
                <ComboBoxItem Content="共存" />
            </ComboBox>

            <TextBlock Text="比例尺横向长度 (像素):" />
            <TextBox
                x:Name="ScaleLengthWidthBox"
                Text="100"
                TextChanged="ScaleParamsChanged" />

            <TextBlock Text="比例尺纵向长度 (像素):" />
            <TextBox
                x:Name="ScaleLengthHeightBox"
                Text="100"
                TextChanged="ScaleParamsChanged" />

            <CheckBox
                x:Name="IsSetScaleModeCheckBox"
                Checked="ScaleParamsChanged"
                Content="模式选择：↑/↓"
                Unchecked="ScaleParamsChanged" />

            <TextBlock Text="比例尺横向长度 (单位):" />
            <TextBox
                x:Name="WidthinUnitBox"
                Text="2"
                TextChanged="ScaleParamsChanged" />

            <TextBlock Text="比例尺纵向长度 (单位):" />
            <TextBox
                x:Name="HeightinUnitBox"
                Text="2"
                TextChanged="ScaleParamsChanged" />

            <TextBlock Text="比例尺（pixel/unit）:" />
            <TextBox
                x:Name="ScaleBox"
                Text="25"
                TextChanged="ScaleParamsChanged" />
            <TextBlock Text="宽高比:" />
            <TextBox
                x:Name="PixelAspectRatioBox"
                Text="1"
                TextChanged="ScaleParamsChanged" />
            <TextBlock Text="单位:" />
            <TextBox
                x:Name="UnitBox"
                Text="Pixel"
                TextChanged="ScaleParamsChanged" />

            <Button Click="ExportImage_Click" Content="导出带比例尺图像" />
        </StackPanel>

        <!--  右侧显示图像和比例尺  -->
        <Canvas
            x:Name="ImageCanvas"
            Grid.RowSpan="2"
            Grid.Column="1"
            Background="LightSlateGray">
            <Image x:Name="MainImage" />
            <Canvas x:Name="OverlayCanvas" />
        </Canvas>
    </Grid>

</Window>
